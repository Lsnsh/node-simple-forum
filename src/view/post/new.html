<section class="section-wrapper new-post-wrapper">
  <h1>new post</h1>
  <form class="new-post">
    <label for="title">标题</label>
    <input type="text" name="title" id="title" required>
    <label for="content">内容</label>
    <textarea cols="30" rows="10" name="content" id="content"></textarea>
    <button type="button" onclick="createPost()">发帖</button>
  </form>
</section>
<script>
  const createPost = () => {
    var url = '/api/post/create';
    var data = {
      title: document.querySelector('#title').value,
      content: document.querySelector('#content').value,
    };

    fetch(url, {
      method: 'POST',
      body: JSON.stringify(data),
      headers: new Headers({
        'Content-Type': 'application/json'
      })
    }).then(async res => {
      const r = await res.json();
      if (r.result) {
        location.replace('/');
      }
    })
      .catch(error => console.error('Error:', error));
  }
</script>
